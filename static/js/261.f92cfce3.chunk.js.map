{"version":3,"file":"static/js/261.f92cfce3.chunk.js","mappings":"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","sources":["webpack://traineeRush/./src/styles/Cart.module.css?3012","webpack://traineeRush/./src/styles/CartItem.module.css?9394","components/Cart/CartItem.jsx","webpack://traineeRush/./src/styles/Checkout.module.css?ded6","components/Cart/Checkout.jsx","components/Cart/Cart.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"cart-items\":\"Cart_cart-items__jO4oP\",\"total\":\"Cart_total__5T0p9\",\"actions\":\"Cart_actions__+npq6\",\"button--alt\":\"Cart_button--alt__GXRve\",\"button\":\"Cart_button__wAAz6\"};","// extracted by mini-css-extract-plugin\nexport default {\"cart-item\":\"CartItem_cart-item__cWKWf\",\"summary\":\"CartItem_summary__jGJXK\",\"price\":\"CartItem_price__hiUBz\",\"amount\":\"CartItem_amount__0NKsD\",\"actions\":\"CartItem_actions__Xcevi\"};","import React from 'react';\r\nimport classes from '../../styles/CartItem.module.css';\r\n\r\nfunction CartItem({\r\n  // eslint-disable-next-line react/prop-types\r\n  name, price, amount, ice, sweetness, onRemove, onAdd,\r\n}) {\r\n  return (\r\n    <li className={classes['cart-item']}>\r\n      <div>\r\n        <h2>{name}</h2>\r\n        <span>{`冰塊:${ice}`}</span>\r\n        {' '}\r\n        <span>{`甜度:${sweetness}`}</span>\r\n        <div className={classes.summary}>\r\n          <span className={classes.price}>{`$ ${price}`}</span>\r\n          <span className={classes.amount}>\r\n            x\r\n            {' '}\r\n            {amount}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className={classes.actions}>\r\n        <button type=\"button\" onClick={onRemove}>−</button>\r\n        <button type=\"button\" onClick={onAdd}>+</button>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default CartItem;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"Checkout_form__cOSNN\",\"control\":\"Checkout_control__Ch+3z\",\"actions\":\"Checkout_actions__zNcSH\",\"submit\":\"Checkout_submit__PPdum\",\"invalid\":\"Checkout_invalid__kBqkg\"};","/* eslint-disable react/prop-types */\r\n/* eslint-disable jsx-a11y/label-has-associated-control */\r\nimport React, { useRef, useContext, useState } from 'react';\r\nimport classes from '../../styles/Checkout.module.css';\r\nimport { CartContext } from '../../context/Context';\r\n\r\nconst isEmpty = (value) => value.trim() === '';\r\n\r\nfunction Checkout({ onCancel, onSubmit, setIsSubmit }) {\r\n  const { dispatch } = useContext(CartContext);\r\n  const nameInputRef = useRef();\r\n  const phoneInputRef = useRef();\r\n  const addressInputRef = useRef();\r\n\r\n  const [formInputsValidity, setFormInputsValidity] = useState({\r\n    name: true,\r\n    phone: true,\r\n    address:true,\r\n  });\r\n\r\n  const confirmHandler = (event) => {\r\n    event.preventDefault();\r\n    const enteredName = nameInputRef.current.value;\r\n    const enteredPhone = phoneInputRef.current.value;\r\n    const enteredAddress = addressInputRef.current.value;\r\n    // 表單驗證\r\n    setFormInputsValidity({\r\n      name: !isEmpty(enteredName),\r\n      phone: !isEmpty(enteredPhone),\r\n      address: !isEmpty(enteredAddress),\r\n    });\r\n\r\n    const formIsValid = !isEmpty(enteredName)\r\n      && !isEmpty(enteredPhone)\r\n      && !isEmpty(enteredAddress)\r\n    if (!formIsValid) {\r\n      return null;\r\n    }\r\n    // 送出訂單\r\n    onSubmit({\r\n      name: enteredName,\r\n      phone: enteredPhone,\r\n      address:enteredAddress,\r\n    });\r\n    dispatch({ type: 'CLEAR' });\r\n    setIsSubmit(true);\r\n    return null;\r\n  };\r\n  // 輸入錯誤變紅\r\n  const nameControlClasses = ({ id }) => `${classes.control} ${\r\n    formInputsValidity[id] ? '' : classes.invalid\r\n  }`;\r\n\r\n  return (\r\n    <form className={classes.form} onSubmit={confirmHandler}>\r\n      <div className={nameControlClasses({ id: 'name' })}>\r\n        <label htmlFor=\"name\">Your Name</label>\r\n        <input type=\"text\" id=\"name\" ref={nameInputRef} />\r\n        {!formInputsValidity.name && <p>Please enter a valid Name!</p>}\r\n      </div>\r\n      <div className={nameControlClasses({ id: 'phone' })}>\r\n        <label htmlFor=\"phone\">Your Phone</label>\r\n        <input type=\"text\" id=\"phone\" ref={phoneInputRef} />\r\n        {!formInputsValidity.phone && <p>Please enter a valid phone!</p>}\r\n      </div>\r\n      <div className={nameControlClasses({ id: 'address' })}>\r\n        <label htmlFor=\"address\">Your Address</label>\r\n        <input type=\"text\" id=\"address\" ref={addressInputRef} />\r\n        {!formInputsValidity.address\r\n        && <p>Please enter a valid address! </p>}\r\n      </div>\r\n\r\n      <div className={classes.actions}>\r\n        <button type=\"button\" onClick={onCancel}>\r\n          Cancel\r\n        </button>\r\n        <button className={classes.submit} type=\"submit\">Confirm</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Checkout;\r\n","import React, { useContext, useState } from 'react';\r\nimport { CartContext } from '../../context/Context';\r\nimport classes from '../../styles/Cart.module.css';\r\nimport Modal from '../UI/Modal';\r\nimport CartItem from './CartItem';\r\nimport Checkout from './Checkout';\r\n\r\nfunction Cart() {\r\n  const {\r\n    setCartIsShown, totalAmount, cart, dispatch,\r\n  } = useContext(CartContext);\r\n  const [isCheckout, setIsCheckout] = useState(false);// 是否點擊order\r\n  const [isSubmit, setIsSubmit] = useState(false);// 是否送出訂單\r\n\r\n  // 隱藏結帳畫面\r\n  const disableCartHandler = () => {\r\n    setCartIsShown(false);\r\n  };\r\n\r\n  // 購物車頁面增加商品\r\n  const cartItemAddHandler = (id) => {\r\n    dispatch({\r\n      type: 'INCREMENT_QUANTITY',\r\n      payload: { id, quantity: 1 },\r\n    });\r\n  };\r\n\r\n  // 購物車頁面減少商品\r\n  const cartItemRemoveHandler = (id) => {\r\n    dispatch({\r\n      type: 'DECREASE_QUANTITY',\r\n      payload: { id },\r\n    });\r\n  };\r\n\r\n  const submitHandler = async (userData) => {\r\n    try {\r\n      const response = await fetch('http://localhost:8080/orders', {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          userRequest: userData,\r\n          orderItemRequestList: cart,\r\n          totalAmount,\r\n        }),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        console.error('請求失敗');\r\n      }\r\n      const responseData = await response.json();\r\n      console.log(responseData);\r\n      console.log(JSON.stringify({\r\n        user: userData,\r\n        orderedItemList: cart,\r\n        totalAmount,\r\n      }));\r\n    } catch (error) {\r\n      console.error('發生錯誤：', error.message);\r\n    }\r\n  };\r\n\r\n  const modalAction = (\r\n    <div className={classes.actions}>\r\n      <button className={classes['button--alt']} onClick={disableCartHandler} type=\"button\">\r\n        Close\r\n      </button>\r\n      {cart.length > 0 && (\r\n      <button\r\n        className={classes.button}\r\n        onClick={() => setIsCheckout(true)}\r\n        type=\"button\"\r\n      >\r\n        Order\r\n      </button>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Modal onClose={disableCartHandler}>\r\n      {/* 購物車 */}\r\n      { !isSubmit\r\n      && (\r\n      <>\r\n        <ul className={classes['cart-items']}>\r\n          {cart.map((item) => (\r\n            <CartItem\r\n              key={item.id}\r\n              name={item.name}\r\n              amount={item.quantity}\r\n              price={item.price}\r\n              ice={item.ice}\r\n              sweetness={item.sweetness}\r\n              onRemove={() => cartItemRemoveHandler(item.id)}\r\n              onAdd={() => cartItemAddHandler(item.id)}\r\n            />\r\n          ))}\r\n        </ul>\r\n        <div className={classes.total}>\r\n          <span>Total Amount</span>\r\n          <span>\r\n            $\r\n            {' '}\r\n            {totalAmount.toFixed(2)}\r\n          </span>\r\n        </div>\r\n\r\n      </>\r\n      )}\r\n      {/* 訂單填寫資料 */}\r\n      {isCheckout\r\n      && !isSubmit && (\r\n      <Checkout\r\n        onCancel={disableCartHandler}\r\n        onSubmit={submitHandler}\r\n        setIsSubmit={setIsSubmit}\r\n      />\r\n      )}\r\n      {/* 點order後原本購物車底下按鈕隱藏 */}\r\n      {!isCheckout && !isSubmit && modalAction}\r\n      {/* 訂單確定送出畫面 */}\r\n      {isSubmit && (\r\n      <>\r\n        <p>Successfully sent the order!</p>\r\n        <div className={classes.actions}>\r\n          <button className={classes['button--alt']} onClick={disableCartHandler} type=\"button\">\r\n            Close\r\n          </button>\r\n        </div>\r\n      </>\r\n      ) }\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n"],"names":["_ref","name","price","amount","ice","sweetness","onRemove","onAdd","_jsxs","className","classes","children","_jsx","concat","type","onClick","isEmpty","value","trim","onCancel","onSubmit","setIsSubmit","dispatch","useContext","CartContext","nameInputRef","useRef","phoneInputRef","addressInputRef","_useState","useState","phone","address","_useState2","_slicedToArray","formInputsValidity","setFormInputsValidity","nameControlClasses","_ref2","id","event","preventDefault","enteredName","current","enteredPhone","enteredAddress","htmlFor","ref","_useContext","setCartIsShown","totalAmount","cart","isCheckout","setIsCheckout","_useState3","_useState4","isSubmit","disableCartHandler","submitHandler","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userData","response","responseData","wrap","_context","prev","next","fetch","method","body","JSON","stringify","userRequest","orderItemRequestList","headers","sent","ok","console","error","json","log","user","orderedItemList","t0","message","stop","_x","apply","arguments","modalAction","length","Modal","onClose","_Fragment","map","item","CartItem","quantity","payload","toFixed","Checkout"],"sourceRoot":""}